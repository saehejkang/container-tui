---
phase: 01-panel-layout-visuals
plan: "02"
type: execute
wave: 2
depends_on:
  - "01-01"
files_modified:
  - ui/components/container_row.go
  - ui/components/styles.go
autonomous: true
requirements:
  - TUI-02
  - TUI-03

must_haves:
  truths:
    - "A running container row renders its name with a green status indicator"
    - "A stopped container row renders its name with a gray status indicator"
    - "An error container row renders its name with a red status indicator"
    - "CPU and memory bars render proportionally (0-100% maps to a fixed-width bar)"
    - "When CPU/memory data is 0.0, bars render as empty (no crash, no garbage)"
  artifacts:
    - path: "ui/components/container_row.go"
      provides: "RenderContainerRow function and status color helpers"
      exports: ["RenderContainerRow", "StatusColor"]
      min_lines: 50
    - path: "ui/components/styles.go"
      provides: "Updated shared styles including resource bar style"
      contains: "ResourceBarStyle"
  key_links:
    - from: "ui/components/container_row.go"
      to: "pkg.Container"
      via: "import and parameter type"
      pattern: "pkg\\.Container"
    - from: "ui/components/container_row.go"
      to: "lipgloss"
      via: "color rendering and bar fill"
      pattern: "lipgloss\\.Color"
---

<objective>
Build the container row rendering component: color-coded status indicators and CPU/memory resource bars displayed in the left panel.

Purpose: The container list panel needs to render each container with visual status at a glance. This plan produces the rendering primitives that plan 04 wires into the layout.
Output: ui/components/container_row.go with RenderContainerRow, ui/components/styles.go updated with ResourceBarStyle.
</objective>

<execution_context>
@/Users/kevingeorge/.claude/get-shit-done/workflows/execute-plan.md
@/Users/kevingeorge/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-panel-layout-visuals/01-01-SUMMARY.md
@ui/components/styles.go
@ui/components/header.go
@pkg/containers.go
</context>

<tasks>

<task type="auto">
  <name>Task 1: Status color helpers and resource bar in styles.go</name>
  <files>ui/components/styles.go</files>
  <action>
Add the following to ui/components/styles.go (do not remove existing styles, only add):

1. Status color constants as Lip Gloss colors:
```go
var StatusRunningColor = lipgloss.Color("#32D74B")  // green (matches existing StatusBox green)
var StatusStoppedColor = lipgloss.Color("#888888")  // gray
var StatusErrorColor   = lipgloss.Color("#FF3B30")  // red (matches existing StatusBox red)
```

2. StatusColor helper function that maps a normalized status string to the correct Lip Gloss color:
```go
func StatusColor(status string) lipgloss.Color {
    switch status {
    case "running":
        return StatusRunningColor
    case "error":
        return StatusErrorColor
    default:
        return StatusStoppedColor
    }
}
```

3. Resource bar style (used for the filled portion of CPU/mem bars):
```go
var ResourceBarFilledStyle = lipgloss.NewStyle().
    Background(lipgloss.Color("#0A84FF"))  // blue, matches existing CursorStyle

var ResourceBarEmptyStyle = lipgloss.NewStyle().
    Background(lipgloss.Color("#333333"))
```

4. Container row style (for the full row in the left panel):
```go
var ContainerRowStyle = lipgloss.NewStyle().
    Padding(0, 1)

var ContainerRowSelectedStyle = lipgloss.NewStyle().
    Background(lipgloss.Color("#0A84FF")).
    Foreground(lipgloss.Color("#FFFFFF")).
    Padding(0, 1)
```

Keep all existing style variables intact.
  </action>
  <verify>
`go build ./...` — no errors.
  </verify>
  <done>
styles.go exports StatusRunningColor, StatusStoppedColor, StatusErrorColor, StatusColor(), ResourceBarFilledStyle, ResourceBarEmptyStyle, ContainerRowStyle, ContainerRowSelectedStyle. All existing styles unchanged. Compiles.
  </done>
</task>

<task type="auto">
  <name>Task 2: RenderContainerRow function</name>
  <files>ui/components/container_row.go</files>
  <action>
Create ui/components/container_row.go in package `components`.

Imports needed: "fmt", "strings", "container-tui/pkg", "github.com/charmbracelet/lipgloss"

Implement the following functions:

**renderResourceBar(value float64, maxValue float64, width int) string**
- Renders a fixed-width progress bar using block characters
- barWidth = width (typically 8-10 chars)
- filled = int(math.Round((value / maxValue) * float64(barWidth))) — clamp to [0, barWidth]
- Use "█" for filled portion, "░" for empty portion
- Apply ResourceBarFilledStyle to filled portion and ResourceBarEmptyStyle to empty
- If maxValue is 0 or value is 0, return all empty characters
- Import "math" for math.Round

**RenderContainerRow(c pkg.Container, selected bool, width int) string**
- Renders one container as a single-line row for the left panel
- Status dot: a colored "● " using StatusColor(c.Status) applied via lipgloss.NewStyle().Foreground(color).Render("● ")
- Name: truncate c.Name to fit width (leave room for status dot + bars). Use a max name width of width - 22 chars. If name is longer, truncate and append "…"
- CPU bar: renderResourceBar(c.CPUPercent, 100.0, 8) — shows CPU % as a filled bar
- Mem bar: renderResourceBar(c.MemoryMB, 1024.0, 8) — shows memory (capped at 1GB for display)
- Row format: "[dot][name padded to maxNameWidth]  [cpu bar] [mem bar]"
- Build as a single string, then apply ContainerRowSelectedStyle or ContainerRowStyle based on `selected`
- Return the fully rendered row string

Example visual output for a running container:
```
● my-app            ██░░░░░░ ████████
```
For a stopped container (gray dot, empty bars):
```
● web-server        ░░░░░░░░ ░░░░░░░░
```

Keep function signatures:
```go
func renderResourceBar(value, maxValue float64, width int) string
func RenderContainerRow(c pkg.Container, selected bool, width int) string
```
  </action>
  <verify>
`go build ./...` — no errors.
`go vet ./...` — no warnings.
  </verify>
  <done>
ui/components/container_row.go exists. RenderContainerRow accepts a pkg.Container, selected bool, and width int. Returns a non-empty string. Status dot color is green for "running", gray for "stopped", red for "error". Resource bars render proportionally using block characters. Compiles with no errors.
  </done>
</task>

</tasks>

<verification>
`go build ./...` passes.
`go vet ./...` passes.
ui/components/container_row.go exports RenderContainerRow(pkg.Container, bool, int) string.
ui/components/styles.go exports StatusColor, ContainerRowStyle, ContainerRowSelectedStyle, ResourceBarFilledStyle, ResourceBarEmptyStyle.
</verification>

<success_criteria>
Container row rendering is complete. A running container shows a green dot and proportional bars. A stopped container shows gray dot and empty bars. An error container shows red dot. All code compiles.
</success_criteria>

<output>
After completion, create `.planning/phases/01-panel-layout-visuals/01-02-SUMMARY.md`
</output>
